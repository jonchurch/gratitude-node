<!DOCTYPE html>
<html>
   <head>
        <% include partials/head %>
    </head>
   <body>
      <section class="pb_cover_v3 cover-bg-opacity text-left pb_gradient_v1">
         <div class="container">
            <div class="row align-items-center justify-content-center">
              
               
               <div class="col-md-6 relative align-self-center join-today-index">
                  <div class="text-center err-msg"></div>
                  <div class="panel panel-default">
                        <div class="panel-heading">
                              <h3 class="panel-title text-center">Contact Us.</h3>
                           </div>
                     <div class="panel-body">
                        
                           
               <!--Section description-->
               <p class="text-center w-responsive mx-auto mb-5">
                  Questions or concerns? If so, don't be shy to send us a message.
                  <br/>Heck, getting together for a coffee is awesome too!</p>
               

               <div class="row">

                  <!--Grid column-->
                  <div class="col-md-12 mb-md-0 mb-5">
                     <form id="contact-form" name="contact-form" action="#" method="POST">

                           <!--Grid row-->
                           <div class="row">

                              <!--Grid column-->
                              <div class="col-md-12">
                                 <div class="md-form mb-0">
                                       <label for="name" class="">Your name</label>
                                       <input type="text" id="name" name="name" class="form-control">
                                       
                                 </div>
                              </div>
                              <!--Grid column-->

                              <!--Grid column-->
                              <div class="col-md-12">
                                 <div class="md-form mb-0">
                                       <label for="email" class="">Your email</label>
                                       <input type="text" id="email" name="email" class="form-control">
                                       
                                 </div>
                              </div>
                              <!--Grid column-->

                           </div>
                           <!--Grid row-->

                           <!--Grid row-->
                           <div class="row">
                              <div class="col-md-12">
                                 <div class="md-form mb-0">
                                       <label for="subject" class="">Subject</label>
                                       <input type="text" id="subject" name="subject" class="form-control">
                                       
                                 </div>
                              </div>
                           </div>
                           
                           <div class="row">

                              <!--Grid column-->
                              <div class="col-md-12">

                                 <div class="md-form">
                                       <label for="message">Your message</label>
                                       <textarea type="textarea" id="message" name="message" rows="5" class="form-control md-textarea"></textarea>
                                       
                                 </div>

                              </div>
                           </div>
                           <!--Grid row-->

                  </form>
                  
                  <div class="text-center text-md-left">
                        <a class="btn btn-primary" onclick="document.getElementById('contact-form').submit();">Send</a>
                  </div>
                  <div class="col-md-12 text-center">
                     
                        <div style="font-size:10px;">
                              <i class="fas fa-phone mt-4 fa-2x"></i>Saint John, New Brunswick, Canada
                              <i class="fas fa-phone-square"></i>(506) 6393357
                              <i class="fas fa-envelope mt-4 fa-2x"></i>adrian@adriannadeau.com
                        </div>
                        
               </div>
                  <div class="status"></div>
               </div>
               
               </div>

            </section>
         
      
       <% include partials/scripts %>
      
    </body>
   <script type="text/javascript">
      $( document ).ready(function() {
         // Handler for .ready() called. 
         $(".err-msg").hide();
         
      });
         (function() {
             'use strict';
             window.addEventListener('load', function() {
                 // Fetch all the forms we want to apply custom Bootstrap validation styles to
                 var forms = document.getElementsByClassName('needs-validation');
                 // Loop over them and prevent submission
                 var validation = Array.prototype.filter.call(forms, function(form) {
                 form.addEventListener('submit', function(event) {
                 if (form.checkValidity() === false) {
                    event.preventDefault();
                     
                 }
                 else{
                     event.preventDefault();
                     var email = $("#email").val();
                     console.log(email);
                     var password = $("#password").val();
                     
                    if( email != "" && password != "" ){
                        $.ajax({
                              url: '/users/login',
                              type: "POST",
                              dataType: "json",
                              data: {
                              email: email,
                              password: password
                              },


                               /**
                               * A function to be called if the request succeeds.
                               */
                               success: function(data, textStatus, jqXHR) {
                                console.log("id : "+data._id);
                                 window.location.assign("/profile/?id="+data._id);
                                 
                                //var url = "http://localhost:3000/users/profile/?id="+data.result._id;
                                 
                               },
                              /**
                               * A function to be called if the request fails. 
                               */
                              error: function(jqXHR, textStatus, errorThrown) {
                                  $(".err-msg").html('Error logging in, please confirm username and password are correct');
                                  $(".err-msg").show();
                                 //alert('An error occurred');
                            
                              }

                             
                        });
                     }
    



///////////////////////////////////////////////////////////

               }
                 
              form.classList.add('was-validated');
             }, false);
         });
         }, false);
         })();
        
         

      </script>
</html>
